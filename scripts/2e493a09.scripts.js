"use strict";angular.module("minibankFrontendApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.map"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MapCtrl"}).when("/about",{templateUrl:"views/about.html"}).otherwise({redirectTo:"/"})}]),angular.module("minibankFrontendApp").controller("MapCtrl",["$scope","$http",function(a,b){function c(b){var c=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);(void 0===a.markerData||b.coords.accuracy+100<a.lastAccuracy)&&(void 0!==a.locationMarker&&a.locationMarker.setMap(null),a.locationMarker=new google.maps.Marker({map:a.myMap,position:c,icon:"images/gpsloc.png"}),a.myMap.setCenter(c),a.myMap.setZoom(15),a.loadMarkers(c),a.lastAccuracy=b.coords.accuracy)}function d(a){console.log(a),navigator.geolocation?navigator.geolocation.watchPosition(c):alert("Your browser does not support Geolocation.")}a.loadMarkers=function(c){var d="http://steras-minibank-beta.appspot.com/minibank",e=d+"?lat="+c.lat()+"&long="+c.lng()+"&callback=JSON_CALLBACK",f=b.jsonp(e);f.success(function(b){console.log(b),a.markerData=b,$.each(b,function(b,c){console.log(c);var d=new google.maps.LatLng(c.latitude,c.longitude);new google.maps.Marker({position:d,map:a.myMap,icon:"images/symbol_dollar.png"})})}),f.error(function(){})},d(a),a.lastAccuracy=1e5,a.mapOptions={center:new google.maps.LatLng(59.92199,10.760078),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP}}]);